#!/bin/sh

DMENU="dmenu -l 7 -i"

fixes="keyboard
audio
screen
multi monitor
bluetooth
mousepad
touch"

toFix=$(echo -e "$fixes" | $DMENU)

case "$toFix" in
    "keyboard")
        setxkbmap -option caps:escape_shifted_capslock
        setxkbmap -layout "us,de" -variant "basic,nodeadkeys" -option grp:ctrls_toggle
        ;;
    "audio")
        pkill pulseaudio
        /bin/sh -c "pulseaudio --daemonize"
        ;;
    "screen")
        pkill picom
        picom --experimental-backends &
        ;;
    "multi monitor")
        xrandr --auto
        sleep 3
        setxkbmap -option caps:escape_shifted_capslock
        setxkbmap -layout "us,de" -variant "basic,nodeadkeys" -option grp:ctrls_toggle
        xrandr --auto --output DP-2 --right-of eDP-1
        sleep 1
        feh --bg-fill $HOME/Pictures/Backgrounds/currentBackground.jpg
        ;;
    "bluetooth")
        mpris-proxy & #allow bluetooth media control keys
        /bin/sh -c "pulseaudio --daemonize"
        ;;
    "mousepad")
        if [ "$(echo -e "activate\ndeactivate" | $DMENU)" = "activate" ]; then xinput enable 12; else xinput disable 12; fi
        ;;
    "touch")
        if [ "$(echo -e "activate\ndeactivate" | $DMENU)" = "activate" ]; then xinput enable 10 && xinput map-to-output 10 eDP-1; else xinput disable 10; fi
        ;;
    *)
        ;;
esac

